syntax = "proto3";

package ao.network;

import "google/rpc/status.proto";

option java_multiple_files = true;
option java_generic_services = true;
option java_package = "edu.handong.csee.isel.proto";
option java_outer_classname = "DataFeedingProto";

service DataFeeding {
    rpc GetData(AgentInfo) returns (Data);
    rpc SendRawAction(RawAction) returns (google.rpc.Status);
}

// Enumeration
message AgentInfo {
    enum AgentType {
        AT_UNSPECIFIED = 0;
        AT_ISA = 1;
        AT_IUA = 2;
        AT_IOA = 3;
    }

    AgentType type = 1;
}

// Data unspecified
message DataUnspecified {}

// Data ISA
message IMU {
    // axis-1 or axis-3
    float accel = 1;

    // axis-1, axis-2, or axis-3
    float angular = 2;

    // axis-2 or axis-3
    float mag_str_x = 3;
    float mag_str_y = 4;
}

message RGBD {
    bytes image = 1;
    bytes depth = 2;
}

message UserCmd {
    string target = 1;
    string text = 2;
}

message DataISA {
    RGBD rgbd = 1;
    IMU imu = 2;
    UserCmd cmd = 3;
}

// Data IUA
message Voice {}

message Tectile {}

message DataIUA {
    RGBD rgbd = 1;
    Voice voice = 2;
    Tectile tectile = 3;
}

// Data IOA
message DataIOA {}

// Data overall
message Data {
    oneof AgentData {
        DataUnspecified data_unspecified = 1;
        DataISA data_ISA = 2;
        DataIUA data_IUA = 3;
        DataIOA data_IOA = 4;
    }
}

// Raw action ISA
message RawActionISA {
    float linear_x = 1;
    float linear_y = 2;
    float linear_z = 3;
    float angular_x = 4;
    float angular_y = 5;
    float angular_z = 6;
}

// Raw action IUA
message RawActionIUA {}

// Raw action IOA
message RawActionIOA {}

// Raw action overall
message RawAction {
    oneof AgentRawAction {
        RawActionISA raw_action_ISA = 1;
        RawActionIUA raw_action_IUA = 2;
        RawActionIOA raw_action_IOA = 3;
    }
}
